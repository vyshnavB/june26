<!DOCTYPE html>
<html lang="en">
    <head>
        {% load static %}
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>gizshare </title>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
        <link rel="stylesheet" href="../../static/style.css">
        <link rel="stylesheet" href="../../static/styles.css">
        <link rel="stylesheet" href="../../static/tagsinput.css" />
        <link rel="stylesheet" href="../../static/bootstrap.min.css">
        <script type="text/javascript" src="../../static/layout.js"></script>
        <script type="text/javascript" src="../../static/jquery-latest.min.js"></script>

     
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v3.0.6/css/line.css">
            <link rel="shortcut icon" href="{% static 'Images/favicon.ico' %}">
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
 <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="../../static/tagsinput.js"></script>




            {% block head %}
            {% endblock %}
    
    </head>
<body class="grey-bg">

 
<div class="container">
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
          <a class="navbar-brand" href="{% url 'index' %}"><img src="../../static/Images/logo.png" alt=""></a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarScroll" aria-controls="navbarScroll" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarScroll">

            <!-- *******search****** -->
            <!-- <form action="{% url 'search' %}" class="d-flex input-group" method="GET" style="align-content: right;">
            <div class="d-flex input-group">
                <input type="text" name="q" class="form-control" placeholder="search" aria-label="Search"
                    aria-describedby="basic-addon2">
                    <button type="submit" style="border: none;" > <span class="input-group-text" id="basic-addon2"><span class="material-symbols-outlined">
                        search
                    </span></span></button>
            </div>
        </form> -->

        <form action="{% url 'search' %}"  class="d-flex input-group" method="GET" style="align-content: right;">
            <div class="input-group">
                {% if not hide_username %}
                <input type="text" name="q" class="form-control" placeholder="search">
                
                {% endif %}
                <div class="input-group-append">
                    <button type="submit" style="border: none;"><span class="input-group-text" id="basic-addon2"><span class="material-symbols-outlined">
                        search

                    </span></span></button>
                </div>
            </div>
        </form>
        <div><ul style="display: flex; padding-top: 25px;">
         
            <li style="list-style: none; padding-left: 15px;">
                <div class="notification">
               <a href="{% url 'notification' %}"><span class="material-symbols-outlined">
                notifications
            </span></a> 
                
                <span class="badge">{{ invc }}</span>
                
                </div>
                <!-- <h6 style="font-size: 11px; margin-top: 2px; margin-left: -5px;">Notifications</h6> -->
           </li>&nbsp;
            <li style="list-style: none; padding-left: 15px; margin-left: -8px;"><div class="notification">
                <a href="{% url 'cart' %}"><span class="material-symbols-outlined">
                  local_mall
                  </span></a>
                <span class="badge">{{ crt_count }}</span>
                </div>
                <h6 style="font-size: 11px; margin-top: 2px; margin-left: 7px;"></h6></li>
        </ul>
            </div>
          


              <div class="d-flex align-items-center nav-profile">

                <div class="nav-info">
                    <a href="{% url 'profile' user.id %}" style="text-decoration: none; color: black;">
                    <h6 >{{user.username}} &nbsp;&nbsp;</h6></a>
                </div>
                <div class="nav-img">
                    {% if user.is_authenticated %}
                   
                    <a href="{% url 'profile' user.id %}">               
                       
                        <div class="nav-profilepic" style="float: left; background-image: url(/media/{{user.profile_pic}})"></div>
                    </a>

                    {% endif %}
                </div>
                
            </div>
          </div>
        </div>
      </nav>


      <div class="row">
        <div class="col-lg-3 col-md-3 col-12">
            <div class="menu-list bg-white">
                <div class="sidenav">
                   
                    <div style="height: 100%;">
                        <div>
                            <div>
                                <ul>
                                    <li>
                                        <a href="{% url 'index' %}" >
                                            <span class="material-symbols-outlined">
                                                home
                                                </span>
                                                Home
                                        </a>
                                    </li>
                                    {% if user.is_authenticated %}
                                        
                                  
                                        <li>
                                            <a href="{% url 'profile' user.id %}">
                                                <span class="material-symbols-outlined">
                                                    person
                                                    </span>
                                                    Profile
                                            </a>
                                           
                                        </li>
                                       
                                      
                                        <li>
                                            <a href="{% url 'wishlis' user.id %}">
                                              <span class="material-symbols-outlined">
                                                bookmark
                                                </span>
                                                    Bookmark
                                            </a>
                                        </li>
                                        <li>
                                            <a href="{% url 'notification'  %}"  >
                                                <span class="material-symbols-outlined">
                                                    notifications
                                                    </span>
                                                    Notifications   {% if fri is not None %}
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="31" height="28" fill="red"  class="bi bi-dot" viewBox="0 0 16 16">
                                                        <path d="M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"/>
                                                      </svg>
                                                    {% endif %}
                                                    
                                            </a>
                                        </li>
                                        <li>
                                            <a href="{% url 'pag' user.id %}" >
                                                <span class="material-symbols-outlined">
                                                    apps
                                                    </span>
                                                    Pages
                                            </a>
                                        </li>
                                        <li>
                                            <a href="{% url 'logout' %}">
                                                <span class="material-symbols-outlined">
                                                    logout
                                                    </span>
                                                   Logout
                                            </a>
                                        </li>
                                        
                                    {% else %}
                                    
                                    <li>
                                        <a href="{% url 'login' %}">
                                            <span class="material-symbols-outlined">
                                                login
                                                </span>
                                               Login
                                        </a>
                                    </li>
                                    <li>
                                        <a href="{% url 'register' %}">
                                            <span class="material-symbols-outlined">
                                                app_registration
                                                </span>
                                               Sign In
                                        </a>
                                    </li>
                                    {% endif %}
                                </ul>
                            </div>
                           
                        </div>
                     
                            
                            {% if user.is_authenticated %}
                                <input type="hidden" id="user_is_authenticated" value="True" data-username='{{user.username}}'>
                            {% else %}
                                <input type="hidden" id="user_is_authenticated" value="False">
                            {% endif %}
                        
                    </div>
                </div>
            </div>

            {% if user.is_authenticated %}
            <div class="menu-list bg-white mt-3">
                <div class="profile-wrapper">
                    <div class="bg-profile"></div>
                    <div class="profile-img">
                        <a href="{% url 'profile' user.id %}">
                        <div class="small-card-pic" style="float: left; background-image: url(/media/{{user.profile_pic}})"></div>
                    </a>
                    </div>
                    <div class="pro-info" >
                        <h2>{{user.username}} </h2>
                        <p>student</p>
                    </div>

                </div>
                <ul class="viewed-list">
                    <li>Views of your profile <span><h6 id="count-views"></h6></span></li>
                        <li>Views of your gizs <span>1</span></li>

                </ul>
            </div>
            {% endif %}


          
        </div>


  <!-- ************************************ -->


  <div class="popup">
   
    
    <div class="large-popup">
        <div>
           
            <div>
                
                <div class="small-profilepic" style="background-image: url(/media/{{user.profile_pic}});"></div>
            </div>
            <div class="form-area">
             
                


<div class="form">
    

    <div class="buttons">
        
        <label for="chbox" class="login btn"><span>Post</span></label>
        <label for="chbox" class="SignUp btn"><span>Sales post</span></label>&nbsp;
       
    </div>
   
    
    <input type="checkbox" id="chbox">	
    <div class="layer"></div>
    <div class="layer2"></div>
    <div class="login_form">

        <form action="{% url 'user_create_post' user.id %}" method="POST"  enctype="multipart/form-data">
            {% csrf_token %}
        <br><textarea style="border: .5px solid rgb(3, 141, 175);" name="text" autofocus placeholder="Post Name..." rows="5" id="post-text"></textarea>
        <input type="hidden" id="img-change" value="false"></input>
      
        <div class="form-action-btns">
            <div>
                <input type="file" name="picture" class="form-control"  id="cover"  >
                <label for="insert-img" class="icon-btn form-icon-btn"> image/video/pdf
                  
                </label>
            </div>
            <br>
            <div>
     
                <button type="submit" class="btn btn-success float-right submit-btn" value="&nbsp;Post&nbsp;" >post</button>
            </div>
        </div><br>
      
        <div >
      <input hidden name="status" value="nsale" >
    </div>
        </form>
        
    </div>

    <div class="SignUp_form">
        <form action="{% url 'user_create_post' user.id %}" method="POST" class="newpost container" enctype="multipart/form-data">
            {% csrf_token %}
        <br><textarea style="border: .5px solid rgb(3, 141, 175);" class="form-control" name="text" autofocus placeholder="Post Name..." rows="5" id="post-text"></textarea>
        <input type="hidden" id="img-change" value="false"></input>
        <div id='img-div'>
            <button id="del-img" type='button'>
                <svg width="1.55em" height="1.55em" viewBox="0 0 24 24" class="r-jwli3a r-4qtqp9 r-yyyyoo r-1q142lx r-50lct3 r-dnmrzs r-bnwqim r-1plcrui r-lrvibr r-1srniue" fill="#fff">
                    <g><path d="M13.414 12l5.793-5.793c.39-.39.39-1.023 0-1.414s-1.023-.39-1.414 0L12 10.586 6.207 4.793c-.39-.39-1.023-.39-1.414 0s-.39 1.023 0 1.414L10.586 12l-5.793 5.793c-.39.39-.39 1.023 0 1.414.195.195.45.293.707.293s.512-.098.707-.293L12 13.414l5.793 5.793c.195.195.45.293.707.293s.512-.098.707-.293c.39-.39.39-1.023 0-1.414L13.414 12z"></path></g>
                </svg>
            </button>
            <img src="{% static 'Images/spinner.gif' %}" id='spinner' height="70px">
        </div>
        
        <div class="form-action-btns">
            <div class="form-group">
                <input type="file" name="picture" class="form-control"  id="cover"  required >
                <label for="insert-img" class="icon-btn form-icon-btn"> image/video/pdf
                  
                </label>
            </div>
            <div>
                
                <input type="submit" class="btn btn-success float-right submit-btn" value="&nbsp;Post&nbsp;" >
            </div>
        </div><br>
        <div>
        <input type="text" name="Product_Price" placeholder="price" class="form-control" required>
    </div>
        <!-- <input type="text" placeholder="Qty"><br> -->
        <div>
            <input hidden name="status" value="sale">
        </div>
        
    </form>
    </div>

</div>
<a href="" style=" text-decoration: none;font-size: 20px; font-weight: 600; " onclick="remove_popup()">X</a>
            </div> 
        </div>
    </div>

</div>


<!-- ******************************************* -->
<!-- modal -->
<div class="modal modal-lg fade" id="exampleModalToggle" aria-hidden="true" aria-labelledby="exampleModalToggleLabel" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalToggleLabel">create new giz</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
         <form action="{% url 'user_create_post' user.id %}" method="POST"  enctype="multipart/form-data">
            {% csrf_token %}
            <div class="mb-3">
                <div class="mb-3" style="margin-left: 10x;">
                    <label for="exampleFormControlInput1" class="form-label">Title</label>
                    <input type="type" class="form-control" name="title" >                        
                  </div>
                <textarea rows="5" type="type"  name="text" class="form-control" placeholder="what do you to talk about?"></textarea>
              </div>
              <div class="form-group">
                <label>Add Topics</label>
                <input type="text" data-role="tagsinput" class="form-control" name="tages_n">
            </div>
              <div class="form-action-btns">
                <div>
                    <label for="insert-img" > image/video/pdf<br></label>
                    <input type="file" name="picture" class="form-control"  id="cover"  > 
     
                </div>
                <br>
            </div>

            <div class="checkbox-card">
                <div class="checkbox"> 
                    <label>
                        <input type="checkbox" class="checkme" name="status" value="sale">&nbsp;&nbsp;Mark as sale</label>
                </div>
                
                
                
                
                <div class="passport-box" style="display: none;">
                    
                        <div class="mb-3">
                            <label for="exampleFormControlInput1" class="form-label">price</label>
                            <input type="number" class="form-control" name="Product_Price"  >                        
                          </div>
              
                   
                    <div class="mb-3">
                        <label for="exampleFormControlInput1" class="form-label">category</label>
                        <input type="type" class="form-control" name="categories" >                        
                      </div>
                </div>
                <div class="col-md-6" style="left: 42%">
                    <button class="btn btn-primary" type="submit">post now</button>
                </div>
                
            </div>
         </form>
        </div>
        <div class="modal-footer">
         
        </div>
      </div>
    </div>
  </div>



<div class="col-lg-6 col-md-6 col-12">
    <div class="create-post bg-white">
        <div class="form-group">
            <a data-bs-target="#exampleModalToggle" data-bs-toggle="modal">
          <input type="text" class="form-control" placeholder="create new giz..." readonly></a>
        </div>
        {% if user.is_authenticated %}
        <!-- <button id="popup-btn" class="btn btn-success new-post-btn" onclick="createpost()">Create Post</button> -->
        <ul>
            <li>
                <button style="border-color: aliceblue;border-radius: 7px;"  >
                <a data-bs-target="#exampleModalToggle" data-bs-toggle="modal">
                    <span class="material-symbols-outlined">
                        description
                    </span>
                </a></button>
            </li>
            <li>
                <button style="border-color: aliceblue;border-radius: 7px; " >
                <a href="#">
                    <span class="material-symbols-outlined">
                        videocam
                    </span>
                </a></button>

            </li>
            <li>
                <button style="border-color: aliceblue;border-radius: 7px;" >
                <a href="#">
                    <span class="material-symbols-outlined">
                        add_a_photo
                    </span>
                </a>
            </button>
            </li>
        </ul>
    {% endif %}

      </div>
      
      <!-- <div style="display: flex; margin-top: 20px; ">
           <h5 style="margin-left: 10px;">gizs feed</h5>


           

           <div class="best-down" style="width:120px; margin-left: 380px;  border-radius: 10px; ">
            <select>
              <option value="0" >best</option>
              <option value="1"> best</option>
              <option value="2">hot</option>
              <option value="3">new</option>
              <option value="3">top</option>
            
            </select>
          </div>


      </div>  -->




      <div class="post-wrapper bg-white">

        {% block body %}
    
        {% endblock %}
    </div>
</div>




<div class="col-lg-3 col-md-3 col-12">
    <div class="feed-list bg-white">
        <!-- <h4> suggestion<span class="material-symbols-outlined">
            
            </span></h4> -->

        <ul>
            {% for suggestion in suggestions %}
          
            {% if not suggestion.is_staff %}
            {% if  suggestion.username != frd.to %}
          
                <li>
                    <div class="feed-wrapper">
                        <div class="feed-img">
                            <a  href="{% url 'profile' suggestion.id %}">
                                <div class="feed-profilepic" style="background-image: url(/media/{{suggestion.profile_pic}})"></div>
                            </a>
                        </div>
                        <div style="margin-left: 25px;" class="feed-info mr-auto">
                            <a style="text-decoration: none; color: black;" href="{% url 'sent_friend_request' suggestion.id   %}"><h6>{{suggestion.username}}</h6></a>
                            <p>student</p>
                        </div>
                        <div>
                           
                                <a  href="{% url 'sent_friend_request' suggestion.id   %}" type="submit" style="text-decoration: none;">+</a>
                        </div> 
                        <!-- <span class="material-symbols-outlined" >
                            add
                        </span> -->
                    </div>
                </li>
                {% endif %}
                {% endif %}
               {% endfor %}
            </ul>
                    </div>
                    <div class="feed-list bg-white">
                        <!-- <h4 style="margin-left: 20px;"> Follow Topics<span class="material-symbols-outlined">
                            
                            </span></h4><br> -->
                
                        <ul>
                            {% for intrests in intrests %}
                          
                          
                          
                                <li>
                                    <div class="feed-wrapper">
                                       
                                        <div style="margin-left: 25px;" class="feed-info mr-auto">
                                            <a href="{% url 'topicpage' intrests.id %}" style="text-decoration:none; color: black;" >
                                            <h6 style="text-decoration:none; color: black;" >{{intrests.intrest_name}}</h6>
                                        </a>
                                            <p></p>
                                        </div>
                                        <div>
                                           
                                                <a  href="" type="submit" style="text-decoration: none;">+</a>
                                        </div> 
                                        <!-- <span class="material-symbols-outlined" >
                                            add
                                        </span> -->
                                    </div>
                                </li>
                                
                               {% endfor %}
                            </ul>
                                    </div>
                </div>
</div>
</div>

</div>

<script src="../../static/bootstrap.min.js"></script>

<script>
    const count = document.getElementById("count-views");

incrementVisitsCount();

function incrementVisitsCount() {
    let visits;

    if (!localStorage.getItem("visits")) localStorage.setItem("visits", 1);
    else {
        visits = +localStorage.getItem("visits");
        const incrementedCount = visits + 1;

        localStorage.setItem("visits", incrementedCount);
    }

    count.innerText = localStorage.getItem("visits");
}

$(function(){
		$(".checkme").click(function(event) {
			var x = $(this).is(':checked');
			if (x == true) {
				$(this).parents(".checkbox-card").find('.passport-box').show();
				$(this).parents(".checkbox-card").find('.apply-box').hide();
			}
			else{
				$(this).parents(".checkbox-card").find('.passport-box').hide();
				$(this).parents(".checkbox-card").find('.apply-box').show();
			}
		});
	})







    


</script>
<script>
    var x, i, j, l, ll, selElmnt, a, b, c;

x = document.getElementsByClassName("best-down");
l = x.length;
for (i = 0; i < l; i++) {
selElmnt = x[i].getElementsByTagName("select")[0];
ll = selElmnt.length;
/* For each element, create a new DIV that will act as the selected item: */
a = document.createElement("DIV");
a.setAttribute("class", "select-selected");
a.innerHTML = selElmnt.options[selElmnt.selectedIndex].innerHTML;
x[i].appendChild(a);
/* For each element, create a new DIV that will contain the option list: */
b = document.createElement("DIV");
b.setAttribute("class", "select-items select-hide");
for (j = 1; j < ll; j++) {
/* For each option in the original select element,
create a new DIV that will act as an option item: */
c = document.createElement("DIV");
c.innerHTML = selElmnt.options[j].innerHTML;
c.addEventListener("click", function(e) {
    /* When an item is clicked, update the original select box,
    and the selected item: */
    var y, i, k, s, h, sl, yl;
    s = this.parentNode.parentNode.getElementsByTagName("select")[0];
    sl = s.length;
    h = this.parentNode.previousSibling;
    for (i = 0; i < sl; i++) {
      if (s.options[i].innerHTML == this.innerHTML) {
        s.selectedIndex = i;
        h.innerHTML = this.innerHTML;
        y = this.parentNode.getElementsByClassName("same-as-selected");
        yl = y.length;
        for (k = 0; k < yl; k++) {
          y[k].removeAttribute("class");
        }
        this.setAttribute("class", "same-as-selected");
        break;
      }
    }
    h.click();
});
b.appendChild(c);
}
x[i].appendChild(b);
a.addEventListener("click", function(e) {
/* When the select box is clicked, close any other select boxes,
and open/close the current select box: */
e.stopPropagation();
closeAllSelect(this);
this.nextSibling.classList.toggle("select-hide");
this.classList.toggle("select-arrow-active");
});
}

function closeAllSelect(elmnt) {
/* A function that will close all select boxes in the document,
except the current select box: */
var x, y, i, xl, yl, arrNo = [];
x = document.getElementsByClassName("select-items");
y = document.getElementsByClassName("select-selected");
xl = x.length;
yl = y.length;
for (i = 0; i < yl; i++) {
if (elmnt == y[i]) {
  arrNo.push(i)
} else {
  y[i].classList.remove("select-arrow-active");
}
}
for (i = 0; i < xl; i++) {
if (arrNo.indexOf(i)) {
  x[i].classList.add("select-hide");
}
}
}

/* If the user clicks anywhere outside the select box,
then close all select boxes: */
document.addEventListener("click", closeAllSelect);
  </script>


<script>
    const stateSelect = document.getElementById("state-select");
    let timeout;

    // Add an event listener for keyup events on the select tag
    stateSelect.addEventListener("keyup", function(event) {
        // Clear any previously set timeout
        clearTimeout(timeout);

        // Wait 500ms before searching for a match
        timeout = setTimeout(function() {
            const input = event.target.value.toUpperCase();
            const options = stateSelect.options;

            // Loop through each option in the select tag
            for (let i = 0; i < options.length; i++) {
                const option = options[i];
                const value = option.value.toUpperCase();
                const text = option.text.toUpperCase();

                // If the input matches the beginning of the option's value or text,
                // set the option as selected and break out of the loop
                if (value.startsWith(input) || text.startsWith(input)) {
                    option.selected = true;
                    break;
                }
            }
        }, 500);
    });
</script>

</body>



</html>